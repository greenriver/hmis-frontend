fragment FormDefinitionFields on FormDefinition {
  id
  version
  role
  status
  identifier
}

fragment PickListOptionFields on PickListOption {
  code
  label
  secondaryLabel
  groupLabel
  groupCode
  initialSelected
}

fragment EnableWhenFields on EnableWhen {
  question
  operator
  answerCode
  answerCodes
  answerNumber
  answerBoolean
  answerGroupCode
  compareQuestion
}
fragment ItemFields on FormItem {
  __typename
  linkId
  type
  component
  prefix
  text
  briefText
  helperText
  required
  hidden
  readOnly
  repeats
  fieldName
  recordType
  pickListReference
  size
  bounds {
    type
    question
    valueNumber
    valueDate
  }
  pickListOptions {
    ...PickListOptionFields
  }
  initial {
    valueCode
    valueBoolean
    valueNumber
    valueLocalConstant
  }
  dataCollectedAbout
  disabledDisplay
  enableBehavior
  enableWhen {
    ...EnableWhenFields
  }
  autofillValues {
    valueCode
    valueBoolean
    valueNumber
    autofillBehavior
    autofillWhen {
      ...EnableWhenFields
    }
  }
}

# GQL doesnt allow recursive fragments, so we have a max nesting level here
fragment FormDefinitionWithJson on FormDefinition {
  ...FormDefinitionFields
  definition {
    __typename
    item {
      ...ItemFields
      item {
        ...ItemFields
        item {
          ...ItemFields
          item {
            ...ItemFields
            item {
              ...ItemFields
            }
          }
        }
      }
    }
  }
}

fragment AssessmentDetailFields on AssessmentDetail {
  id
  dataCollectionStage
  role
  status
}

fragment UserFields on User {
  __typename
  id
  name
}

fragment AssessmentFields on Assessment {
  id
  inProgress
  assessmentDate
  assessmentLevel
  assessmentLocation
  assessmentType
  prioritizationStatus
  dateCreated
  dateUpdated
  dateDeleted
  user {
    ...UserFields
  }
  assessmentDetail {
    ...AssessmentDetailFields
    definition {
      ...FormDefinitionFields
    }
  }
}

# contains big JSON definition & current values
fragment AssessmentWithDefinitionAndValues on Assessment {
  ...AssessmentFields
  assessmentDetail {
    ...AssessmentDetailFields
    values
    definition {
      ...FormDefinitionWithJson
    }
  }
}
