fragment FormDefinitionFields on FormDefinition {
  id
  version
  role
  status
  identifier
}

fragment PickListOptionFields on PickListOption {
  code
  label
  secondaryLabel
  groupLabel
  groupCode
  initialSelected
}

fragment ItemFields on FormItem {
  __typename
  linkId
  type
  prefix
  text
  helperText
  required
  hidden
  readOnly
  repeats
  queryField
  pickListReference
  bounds {
    type
    question
    valueNumber
    valueDate
  }
  pickListOptions {
    ...PickListOptionFields
  }
  initial {
    valueCode
    valueBoolean
    valueNumber
  }
  dataCollectedAbout
  enableBehavior
  enableWhen {
    question
    operator
    answerCode
    answerCodes
    answerNumber
    answerBoolean
    answerGroupCode
  }
}

# GQL doesnt allow recursive fragments, so we have a max nesting level here
fragment FormDefinitionWithJson on FormDefinition {
  ...FormDefinitionFields
  definition {
    __typename
    item {
      ...ItemFields
      item {
        ...ItemFields
        item {
          ...ItemFields
          item {
            ...ItemFields
            item {
              ...ItemFields
            }
          }
        }
      }
    }
  }
}

fragment AssessmentDetailFields on AssessmentDetail {
  id
  dataCollectionStage
  role
  status
}

fragment AssessmentFields on Assessment {
  id
  inProgress
  assessmentDate
  assessmentLevel
  assessmentLocation
  assessmentType
  prioritizationStatus
  dateCreated
  dateUpdated
  dateDeleted
  user {
    id
    name
  }
  assessmentDetail {
    ...AssessmentDetailFields
    definition {
      ...FormDefinitionFields
    }
  }
}

# contains big JSON definition & current values
fragment AssessmentWithDefinitionAndValues on Assessment {
  ...AssessmentFields
  assessmentDetail {
    ...AssessmentDetailFields
    values
    definition {
      ...FormDefinitionWithJson
    }
  }
}
