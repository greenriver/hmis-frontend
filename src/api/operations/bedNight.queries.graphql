query BulkServicesClientSearch(
  $textSearch: String!
  $filters: ClientFilterOptions
  $limit: Int
  $offset: Int
  $sortOrder: ClientSortOption
  $serviceTypeId: ID!
  $projectId: ID!
  $serviceDate: ISO8601Date!
) {
  clientSearch(
    input: { textSearch: $textSearch }
    filters: $filters
    limit: $limit
    offset: $offset
    sortOrder: $sortOrder
  ) {
    offset
    limit
    nodesCount
    nodes {
      id
      ...ClientName
      ...ClientIdentificationFields
      activeEnrollment(projectId: $projectId, openOnDate: $serviceDate) {
        id
        entryDate
        lastServiceDate(serviceTypeId: $serviceTypeId)
        services(
          limit: 25 # not expected to receive >25 services of 1 type on 1 day at 1 project
          offset: 0
          filters: { dateProvided: $serviceDate, serviceType: [$serviceTypeId] }
        ) {
          limit
          offset
          nodesCount
          nodes {
            id
          }
        }
      }
    }
  }
}

query GetProjectEnrollmentsForBedNights(
  $id: ID!
  $filters: EnrollmentsForProjectFilterOptions
  $sortOrder: EnrollmentSortOption
  $limit: Int = 10
  $offset: Int = 0
) {
  project(id: $id) {
    id
    enrollments(
      limit: $limit
      offset: $offset
      sortOrder: $sortOrder
      filters: $filters
    ) {
      offset
      limit
      nodesCount
      nodes {
        ...ProjectEnrollmentFields
        lastBedNightDate
      }
    }
  }
}

query GetBedNightsOnDate($projectId: ID!, $bedNightOnDate: ISO8601Date!) {
  project(id: $projectId) {
    id
    enrollments(
      limit: 500
      offset: 0
      filters: { bedNightOnDate: $bedNightOnDate }
    ) {
      offset
      limit
      nodesCount
      nodes {
        id
      }
    }
  }
}

mutation UpdateBedNights($input: UpdateBedNightsInput!) {
  updateBedNights(input: $input) {
    success
    errors {
      ...ValidationErrorFields
    }
  }
}

mutation BulkAssignService($input: BulkAssignServiceInput!) {
  bulkAssignService(input: $input) {
    success
    errors {
      ...ValidationErrorFields
    }
  }
}

mutation BulkRemoveService($projectId: ID!, $serviceIds: [ID!]!) {
  bulkRemoveService(projectId: $projectId, serviceIds: $serviceIds) {
    success
    errors {
      ...ValidationErrorFields
    }
  }
}
