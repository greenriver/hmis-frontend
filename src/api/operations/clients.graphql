fragment EnrollmentFields on Enrollment {
  id
  entryDate
  exitDate
  project {
    projectName
  }
}

fragment ClientName on Client {
  firstName
  preferredName
  lastName
  nameSuffix
}

fragment ClientFields on Client {
  id
  personalId
  ssnSerial
  dob
  dateUpdated
  ...ClientName
}

fragment HouseholdClientFields on HouseholdClient {
  id
  relationshipToHoH
  client {
    id
    ...ClientName
  }
}

query GetEnrollment($id: ID!) {
  enrollment(id: $id) {
    ...EnrollmentFields
  }
}

query GetEnrollmentWithHoH($id: ID!) {
  enrollment(id: $id) {
    ...EnrollmentFields
    household {
      id
      householdClients {
        ...HouseholdClientFields
      }
    }
  }
}

query SearchClients($input: ClientSearchInput!, $limit: Int, $offset: Int) {
  clientSearch(input: $input, limit: $limit, offset: $offset) {
    offset
    limit
    nodesCount
    nodes {
      ...ClientFields
    }
  }
}

query GetClient($id: ID!) {
  client(id: $id) {
    ...ClientFields
  }
}

query GetClientWithEnrollments(
  $id: ID!
  $enrollmentsLimit: Int = 10
  $enrollmentsOffset: Int = 0
) {
  client(id: $id) {
    ...ClientFields
    enrollments(
      limit: $enrollmentsLimit
      offset: $enrollmentsOffset
      sortOrder: MOST_RECENT
    ) {
      offset
      limit
      nodesCount
      nodes {
        ...EnrollmentFields
      }
    }
  }
}

mutation CreateClient($input: CreateClientInput!) {
  createClient(input: $input) {
    clientMutationId
    client {
      ...ClientFields
    }
    errors {
      type
      attribute
      message
      fullMessage
    }
  }
}
